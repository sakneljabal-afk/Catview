<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ù…ØªØ³Ø§Ø¨Ù‚ Ø§Ù„Ù…Ø¹Ø±ÙØ© - Ø¹Ù„ÙˆÙ… Ø±Ø§Ø¨Ø¹Ø©</title>
<style>
/* ÙƒÙ„ Ø§Ù„Ù€ CSS ÙŠØ¸Ù„ ÙƒÙ…Ø§ Ù‡ÙˆØŒ Ù„Ø£Ù†Ù‡ Ø®Ø§Øµ Ø¨ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… */
body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: linear-gradient(to bottom, #87CEEB, #E0F6FF);
    font-family: 'Cairo', Tahoma, Arial, sans-serif;
    touch-action: none;
    user-select: none;
    -webkit-user-select: none;
}

#gameContainer {
    width: 100vw;
    height: 100vh;
    position: relative;
    display: flex;
    flex-direction: column;
}

#header {
    width: 100%;
    padding: 10px 5px;
    text-align: center;
    font-weight: bold;
    font-size: 14px;
    color: #2b6fb3;
    background: rgba(255, 255, 255, 0.9);
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    z-index: 100;
}

#gameArea {
    flex: 1;
    position: relative;
    overflow: hidden;
}

#sidebar-left {
    position: absolute;
    right: 5px;
    top: 60px;
    width: 180px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
    background: rgba(240, 248, 255, 0.95);
    padding: 10px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    backdrop-filter: blur(5px);
    font-size: 12px;
    z-index: 10;
}

#sidebar-left h4 {
    text-align: center;
    margin: 0 0 10px 0;
    color: #2b6fb3;
    border-bottom: 2px solid #2b6fb3;
    padding-bottom: 5px;
    font-size: 13px;
}

.answered {
    margin-bottom: 6px;
    padding: 6px;
    background: #d1ffd1;
    border-radius: 5px;
    border-right: 3px solid #4CAF50;
    font-size: 11px;
    line-height: 1.3;
}

#sidebar-right {
    position: absolute;
    left: 5px;
    top: 60px;
    width: 150px;
    background: rgba(255, 240, 245, 0.95);
    padding: 10px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    backdrop-filter: blur(5px);
    font-size: 12px;
    z-index: 10;
}

#sidebar-right h4 {
    text-align: center;
    margin: 0 0 10px 0;
    color: #2b6fb3;
    border-bottom: 2px solid #2b6fb3;
    padding-bottom: 5px;
    font-size: 13px;
}

.game-info {
    margin: 8px 0;
    padding: 6px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 5px;
    font-weight: bold;
    text-align: center;
    font-size: 11px;
}

#speedMeter {
    height: 15px;
    background: #ddd;
    border-radius: 8px;
    margin: 8px 0;
    overflow: hidden;
    border: 1px solid #aaa;
}

#speedFill {
    height: 100%;
    width: 50%;
    background: linear-gradient(to right, #4CAF50, #FFC107, #FF5722);
    border-radius: 8px;
    transition: width 0.5s;
}

#questionBox {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 0 25px rgba(0,0,0,0.4);
    width: 90%;
    max-width: 400px;
    display: none;
    z-index: 1000;
    border: 3px solid #2b6fb3;
}

#questionBox h3 {
    font-size: 16px;
    margin-bottom: 15px;
    color: #2b6fb3;
    line-height: 1.5;
    text-align: center;
}

.choice {
    background: #f0f0f0;
    padding: 12px;
    margin: 8px 0;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s;
    border: 2px solid transparent;
    text-align: center;
}

.choice:hover, .choice:active {
    background: #d0d0d0;
    transform: translateX(-3px);
    border-color: #2b6fb3;
}

.choice.correct {
    background: #d1ffd1;
    border-color: #4CAF50;
}

.choice.wrong {
    background: #ffd1d1;
    border-color: #ff5722;
}

#winScreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 200, 0, 0.95);
    color: white;
    font-size: 28px;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    display: none;
    z-index: 1001;
    text-align: center;
    padding: 20px;
}

#winScreen button {
    margin-top: 20px;
    padding: 12px 24px;
    font-size: 18px;
    background: white;
    color: #2b6fb3;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
}

/* Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ù„Ù„Ø¬ÙˆØ§Ù„ */
#controls {
    position: absolute;
    bottom: 20px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    gap: 15px;
    z-index: 10;
}

.control-btn {
    width: 70px;
    height: 70px;
    background: rgba(43, 111, 179, 0.8);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    color: white;
    cursor: pointer;
    user-select: none;
    border: 4px solid white;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    transition: all 0.1s;
}

.control-btn:active {
    transform: scale(0.95);
    background: rgba(43, 111, 179, 1);
}

#accelerateBtn {
    position: absolute;
    bottom: 100px;
    left: 20px;
    width: 80px;
    height: 80px;
    background: rgba(255, 87, 34, 0.9);
    font-size: 34px;
    z-index: 10;
}

@media only screen and (max-width: 768px) {
    #sidebar-left, #sidebar-right {
        width: 140px;
        font-size: 11px;
    }
    
    #sidebar-left {
        right: 5px;
        top: 50px;
    }
    
    #sidebar-right {
        left: 5px;
        top: 50px;
    }
    
    .game-info {
        font-size: 10px;
        padding: 5px;
    }
    
    #controls {
        gap: 10px;
    }
    
    .control-btn {
        width: 65px;
        height: 65px;
        font-size: 26px;
    }
    
    #accelerateBtn {
        width: 75px;
        height: 75px;
        font-size: 32px;
        bottom: 90px;
        left: 15px;
    }
}

/* Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
#startScreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, #87CEEB, #2b6fb3);
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 1002;
    text-align: center;
    padding: 20px;
}

#startScreen h1 {
    font-size: 36px;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

#startScreen p {
    font-size: 18px;
    margin-bottom: 30px;
    max-width: 600px;
    line-height: 1.6;
}

#startScreen button {
    padding: 15px 40px;
    font-size: 20px;
    background: white;
    color: #2b6fb3;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

.hidden {
    display: none !important;
}
</style>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.min.js"></script>
</head>
<body>
<div id="startScreen">
    <h1>ğŸš— Ù…ØªØ³Ø§Ø¨Ù‚ Ø§Ù„Ù…Ø¹Ø±ÙØ© ğŸ§ </h1>
    <p>Ø§Ø®ØªØ± Ø³Ø±Ø¹ØªÙƒ ÙˆØ£Ø¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„ØªØ±ØªÙØ¹ Ø¯Ø±Ø¬ØªÙƒ!<br>
    Ø§Ø³ØªØ®Ø¯Ù… Ø²Ø± ğŸš€ Ù„ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø³ÙŠØ§Ø±Ø©<br>
    Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø³Ù‡Ù… Ù„Ø¶Ø¨Ø· ØªÙˆØ§Ø²Ù† Ø§Ù„Ø³ÙŠØ§Ø±Ø©<br>
    ÙƒÙ„ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© ØªØ²ÙŠØ¯ Ø³Ø±Ø¹ØªÙƒ!<br>
    <strong>Ø§Ù„Ù…Ø§Ø¯Ø©: Ø¹Ù„ÙˆÙ… Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</strong></p>
    <button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
</div>

<div id="gameContainer" class="hidden">
    <div id="header">
        Ù…ØªØ³Ø§Ø¨Ù‚ Ø§Ù„Ù…Ø¹Ø±ÙØ© - Ø¹Ù„ÙˆÙ… Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ
    </div>
    
    <div id="gameArea">
        <!-- Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Canvas Ø¨ÙˆØ§Ø³Ø·Ø© Phaser -->
        
        <div id="sidebar-left">
            <h4>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©</h4>
            <div id="answeredList"></div>
        </div>
        
        <div id="sidebar-right">
            <h4>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©</h4>
            <div class="game-info">Ø§Ù„Ø³Ø±Ø¹Ø©: <span id="currentSpeed">2</span></div>
            <div class="game-info">Ø§Ù„Ù†ØªÙŠØ¬Ø©: <span id="score">0</span></div>
            <div class="game-info">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="questionsRemaining">0</span></div>
            <div id="speedMeter">
                <div id="speedFill"></div>
            </div>
        </div>
        
        <div id="accelerateBtn" class="control-btn">ğŸš€</div>
        
        <div id="controls">
            <div class="control-btn" id="leftBtn">â†</div>
            <div class="control-btn" id="rightBtn">â†’</div>
        </div>
    </div>
</div>

<div id="questionBox">
    <h3 id="qText"></h3>
    <div id="choices"></div>
</div>

<div id="winScreen" class="hidden">
    ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©! ğŸ‰
    <div style="font-size: 20px; margin-top: 20px;">Ù†ØªÙŠØ¬ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: <span id="finalScore">0</span></div>
    <button onclick="restartGame()">Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</button>
</div>

<script>
// ********** Ø§Ù„Ø£Ø³Ø¦Ù„Ø© **********
const allQuestions = [
    {
        "q": "ØªØ¹ÙŠØ´ Ø´Ø¬Ø±Ø© Ø§Ù„Ù…Ø§Ù†Ø¬Ø±ÙˆÙ ÙÙŠ Ø¨ÙŠØ¦Ø© Ø§Ù„Ù…ÙŠØ§Ù‡ Ø§Ù„Ù…Ø§Ù„Ø­Ø©ØŒ ÙˆÙ„Ù‡Ø°Ø§ ØªÙ…ØªÙ„Ùƒ ØªÙƒÙŠÙØ§Ù‹ ØªØ±ÙƒÙŠØ¨ÙŠØ§Ù‹ Ù‡Ùˆ:",
        "c": [
            "Ø£ÙˆØ±Ø§Ù‚ Ø¹Ø±ÙŠØ¶Ø© ØªØ·ÙÙˆ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø§Ø¡",
            "Ø¬Ø°ÙˆØ± Ù‚ØµÙŠØ±Ø© Ø¶Ø¹ÙŠÙØ©",
            "Ø¬Ø°ÙˆØ± Ø·ÙˆÙŠÙ„Ø© ÙˆÙ‚ÙˆÙŠØ© Ù„Ù…Ù‚Ø§ÙˆÙ…Ø© Ø§Ù„Ø£Ù…ÙˆØ§Ø¬"
        ],
        "a": 2
    },
    {
        "q": "Ù…Ø§ Ù‡ÙŠ ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¬Ø°ÙˆØ± Ø§Ù„Ø·ÙˆÙŠÙ„Ø© ÙˆØ§Ù„Ù‚ÙˆÙŠØ© Ù„Ø´Ø¬Ø±Ø© Ø§Ù„Ù…Ø§Ù†Ø¬Ø±ÙˆÙØŸ",
        "c": [
            "ØªØ®Ø²ÙŠÙ† ÙƒÙ…ÙŠØ§Øª ÙƒØ¨ÙŠØ±Ø© Ù…Ù† Ø§Ù„Ù…Ø§Ø¡",
            "Ø§Ù…ØªØµØ§Øµ Ø§Ù„Ø¶ÙˆØ¡ Ù…Ù† Ø³Ø·Ø­ Ø§Ù„Ù…Ø§Ø¡",
            "Ø§Ù„ØµÙ…ÙˆØ¯ Ø£Ù…Ø§Ù… Ø§Ù„Ø£Ù…ÙˆØ§Ø¬ Ø§Ù„Ù‚ÙˆÙŠØ©"
        ],
        "a": 2
    },
    {
        "q": "Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„ØªÙŠ ÙŠÙ†Ù…Ùˆ ÙÙŠÙ‡Ø§ Ù†Ø¨Ø§Øª Ø²Ù†Ø¨Ù‚ Ø§Ù„Ù…Ø§Ø¡ (Ø§Ù„Ù„ÙˆØªØ³) Ù‡ÙŠ Ø§Ù„Ù…Ø³ØªÙ†Ù‚Ø¹Ø§ØªØŒ ÙˆØªØªÙ…ÙŠØ² Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø¨Ù€:",
        "c": [
            "Ù…ÙŠØ§Ù‡ Ù…Ø§Ù„Ø­Ø© ÙˆØ£Ù…ÙˆØ§Ø¬ Ù‚ÙˆÙŠØ©",
            "ØªØ±Ø¨Ø© Ø¬Ø§ÙØ© ÙˆØ¯Ø±Ø¬Ø§Øª Ø­Ø±Ø§Ø±Ø© Ù…Ø±ØªÙØ¹Ø©",
            "Ù…ÙŠØ§Ù‡ Ø±Ø§ÙƒØ¯Ø© ÙˆÙƒÙ…ÙŠØ§Øª ÙƒØ¨ÙŠØ±Ø© Ù…Ù† Ø§Ù„Ø·ÙŠÙ†"
        ],
        "a": 2
    },
    {
        "q": "ÙŠÙ…ØªÙ„Ùƒ Ù†Ø¨Ø§Øª Ø²Ù†Ø¨Ù‚ Ø§Ù„Ù…Ø§Ø¡ Ø£ÙˆØ±Ø§Ù‚Ø§Ù‹ Ø¹Ø±ÙŠØ¶Ø© ØªØ·ÙÙˆ Ø¹Ù„Ù‰ Ø³Ø·Ø­ Ø§Ù„Ù…Ø§Ø¡ØŒ ÙˆÙ‡Ø°Ø§ Ø§Ù„ØªÙƒÙŠÙ Ø§Ù„ØªØ±ÙƒÙŠØ¨ÙŠ ÙŠØ³Ø§Ø¹Ø¯Ù‡ Ø¹Ù„Ù‰:",
        "c": [
            "Ù…Ù‚Ø§ÙˆÙ…Ø© Ø§Ù„ØªÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø§Ø¦ÙŠØ©",
            "ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø§Ø¡ Ø§Ù„Ø²Ø§Ø¦Ø¯",
            "Ø§Ù…ØªØµØ§Øµ Ù‚Ø¯Ø± ÙƒØ¨ÙŠØ± Ù…Ù† Ø¶ÙˆØ¡ Ø§Ù„Ø´Ù…Ø³"
        ],
        "a": 2
    },
    {
        "q": "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„ØªÙŠ ØªØªÙƒÙŠÙ Ø´Ø¬Ø±Ø© Ø§Ù„ØµÙ†ÙˆØ¨Ø± Ù„Ù„Ø¹ÙŠØ´ ÙÙŠÙ‡Ø§ØŸ",
        "c": [
            "Ø§Ù„Ù…Ø³ØªÙ†Ù‚Ø¹Ø§Øª Ø§Ù„Ù…Ø§Ø¦ÙŠØ©",
            "Ø§Ù„ØµØ­Ø§Ø±ÙŠ Ø§Ù„Ø¬Ø§ÙØ©",
            "Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø«Ù„Ø¬ÙŠØ© Ø´Ø¯ÙŠØ¯Ø© Ø§Ù„Ø¨Ø±ÙˆØ¯Ø©"
        ],
        "a": 2
    }
];

// ********** Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© **********
let game;
let config;
let scene;
let car;
let terrainGraphics;
let terrainPath = [];
let questionBoxes = [];
let currentQuestions = [...allQuestions];
let answeredQuestions = new Set();
let baseSpeed = 2; // Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
let scrollSpeed = baseSpeed; // Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©
let score = 0;
let gamePaused = false;
let isAccelerating = false;
let keys = {};

// ********** ÙØ¦Ø© Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ **********
class MainScene extends Phaser.Scene {
    constructor() {
        super({ key: 'MainScene' });
    }

    preload() {
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±
        this.load.image('car', 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCA2MCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjYwIiBoZWlnaHQ9IjMwIiByeD0iNSIgZmlsbD0iI0ZGMDU3MjIiLz4KPHJlY3QgeD0iNSIgeT0iNSIgd2lkdGg9IjE1IiBoZWlnaHQ9IjgiIGZpbGw9IiMzMzMzMzMiLz4KPHJlY3QgeD0iMjUiIHk9IjUiIHdpZHRoPSIxNSIgaGVpZ2h0PSI4IiBmaWxsPSIjMzMzMzMzIi8+CjxjaXJjbGUgY3g9IjEwIiBjeT0iMjUiIHI9IjYiIGZpbGw9IiMzMzMzMzMiLz4KPGNpcmNsZSBjeD0iNTAiIGN5PSIyNSIgcj0iNiIgZmlsbD0iIzMzMzMzMyIvPgo8Y2lyY2xlIGN4PSIxMCIgY3k9IjI1IiByPSIzIiBmaWxsPSIjNjY2NjY2Ii8+CjxjaXJjbGUgY3g9IjUwIiBjeT0iMjUiIHI9IjMiIGZpbGw9IiM2NjY2NjYiLz4KPC9zdmc+');
        
        this.load.image('questionBox', 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAzMCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiByeD0iNSIgZmlsbD0iI0ZGQzEwNyIvPgo8dGV4dCB4PSI1MCUiIHk9IjUwJSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtc2l6ZT0iMTgiIGZvbnQtd2VpZ2h0PSJib2xkIj4/PC90ZXh0Pgo8L3N2Zz4=');
        
        this.load.image('repeatBox', 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzUiIGhlaWdodD0iMzUiIHZpZXdCb3g9IjAgMCAzNSAzNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjM1IiBoZWlnaHQ9IjM1IiByeD0iNiIgZmlsbD0iI0ZGQzEwNyIvPgo8dGV4dCB4PSI1MCUiIHk9IjUwJSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtc2l6ZT0iMjAiIGZvbnQtd2VpZ2h0PSJib2xkIj4/PC90ZXh0Pgo8L3N2Zz4=');
    }

    create() {
        // Ø¥Ù†Ø´Ø§Ø¡ Ø®Ù„ÙÙŠØ© Ø§Ù„Ø³Ù…Ø§Ø¡
        this.createSky();
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³
        this.createTerrain();
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø³ÙŠØ§Ø±Ø©
        this.createCar();
        
        // Ø¥Ù†Ø´Ø§Ø¡ ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        this.createQuestionBoxes();
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§ØµØ·Ø¯Ø§Ù…
        this.setupCollisions();
        
        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        updateUI();
    }

    update() {
        if (gamePaused) return;
        
        // Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªØ³Ø§Ø±Ø¹
        if (isAccelerating) {
            scrollSpeed = Math.min(baseSpeed + 1, 5);
        } else {
            scrollSpeed = Math.max(baseSpeed, 1);
        }
        
        // ØªØ­Ø±ÙŠÙƒ Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³ ÙˆØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        this.moveTerrain();
        this.moveQuestionBoxes();
        
        // ØªØ­Ø¯ÙŠØ« ÙˆØ¶Ø¹ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³
        this.updateCarPosition();
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØµØ·Ø¯Ø§Ù…
        this.checkCollisions();
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª
        this.updateGraphics();
    }

    createSky() {
        // Ø®Ù„ÙÙŠØ© Ù…ØªØ¯Ø±Ø¬Ø© Ù„Ù„Ø³Ù…Ø§Ø¡
        const gradient = this.add.graphics();
        gradient.fillGradientStyle(0x87CEEB, 0x87CEEB, 0xE0F6FF, 0xE0F6FF, 1);
        gradient.fillRect(0, 0, this.game.config.width, this.game.config.height);
        
        // Ø³Ø­Ø¨
        for (let i = 0; i < 5; i++) {
            const cloud = this.add.graphics();
            cloud.fillStyle(0xFFFFFF, 0.7);
            this.createCloudShape(cloud, 100 + i * 200, 50 + i * 30);
        }
        
        // Ø¬Ø¨Ø§Ù„ Ø¨Ø¹ÙŠØ¯Ø©
        for (let i = 0; i < 3; i++) {
            const mountain = this.add.graphics();
            mountain.fillStyle(0x6495ED, 0.3);
            this.createMountainShape(mountain, i * 300, this.game.config.height * 0.6);
        }
    }

    createCloudShape(graphics, x, y) {
        graphics.beginPath();
        graphics.arc(x, y, 25, 0, Math.PI * 2);
        graphics.arc(x + 30, y - 10, 30, 0, Math.PI * 2);
        graphics.arc(x + 60, y, 25, 0, Math.PI * 2);
        graphics.arc(x + 30, y + 10, 20, 0, Math.PI * 2);
        graphics.fillPath();
    }

    createMountainShape(graphics, x, y) {
        graphics.beginPath();
        graphics.moveTo(x, y);
        for (let j = 0; j < 10; j++) {
            graphics.lineTo(x + j * 40, y - 100 * Math.sin(j * 0.3));
        }
        graphics.lineTo(x + 400, y);
        graphics.closePath();
        graphics.fillPath();
    }

    createTerrain() {
        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³Ø§Ø± Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³
        terrainPath = [];
        let currentY = this.game.config.height * 0.6;
        let terrainType = 'flat';
        let segmentLength = 0;
        
        for (let x = 0; x < this.game.config.width * 3; x += 20) {
            // ØªØºÙŠÙŠØ± Ù†ÙˆØ¹ Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³
            if (segmentLength <= 0) {
                const types = ['flat', 'hill', 'mountain', 'valley'];
                terrainType = types[Math.floor(Math.random() * types.length)];
                segmentLength = 50 + Math.random() * 100;
            }
            
            // Ø­Ø³Ø§Ø¨ Y Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù†ÙˆØ¹ Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³
            switch(terrainType) {
                case 'flat':
                    currentY += (Math.random() - 0.5) * 3;
                    break;
                case 'hill':
                    currentY = this.game.config.height * 0.5 + Math.sin(x * 0.02) * 30;
                    break;
                case 'mountain':
                    currentY = this.game.config.height * 0.4 + Math.sin(x * 0.015) * 60;
                    break;
                case 'valley':
                    currentY = this.game.config.height * 0.7 + Math.sin(x * 0.025) * 40;
                    break;
            }
            
            currentY = Math.max(this.game.config.height * 0.4, 
                              Math.min(this.game.config.height * 0.8, currentY));
            
            terrainPath.push({ x, y: currentY });
            segmentLength--;
        }
        
        // Ø±Ø³Ù… Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³
        this.drawTerrain();
    }

    drawTerrain() {
        if (terrainGraphics) {
            terrainGraphics.destroy();
        }
        
        terrainGraphics = this.add.graphics();
        
        // Ø±Ø³Ù… Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³
        terrainGraphics.fillStyle(0x8BC34A, 1);
        terrainGraphics.beginPath();
        terrainGraphics.moveTo(terrainPath[0].x, terrainPath[0].y);
        
        for (let i = 1; i < terrainPath.length; i++) {
            terrainGraphics.lineTo(terrainPath[i].x, terrainPath[i].y);
        }
        
        terrainGraphics.lineTo(terrainPath[terrainPath.length-1].x, this.game.config.height);
        terrainGraphics.lineTo(terrainPath[0].x, this.game.config.height);
        terrainGraphics.closePath();
        terrainGraphics.fillPath();
        
        // Ø­Ø¯ÙˆØ¯ Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³
        terrainGraphics.lineStyle(2, 0x558B2F, 1);
        terrainGraphics.beginPath();
        terrainGraphics.moveTo(terrainPath[0].x, terrainPath[0].y);
        
        for (let i = 1; i < terrainPath.length; i++) {
            terrainGraphics.lineTo(terrainPath[i].x, terrainPath[i].y);
        }
        terrainGraphics.strokePath();
    }

    createCar() {
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø³ÙŠØ§Ø±Ø© ÙƒØµÙˆØ±Ø© Sprite
        const carX = this.game.config.width * 0.15;
        const initialY = this.getTerrainYAtX(carX);
        
        car = this.add.sprite(carX, initialY - 30, 'car');
        car.setScale(0.8);
        car.angle = 0; // Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ù…ÙŠÙ„
        
        // Ø¥Ø¶Ø§ÙØ© ÙÙŠØ²ÙŠØ§Ø¡ Ù„Ù„Ø³ÙŠØ§Ø±Ø©
        this.physics.add.existing(car);
        car.body.setSize(40, 20);
    }

    createQuestionBoxes() {
        questionBoxes = [];
        
        currentQuestions.forEach((question, index) => {
            const spacing = this.game.config.width * 1.5 / currentQuestions.length;
            const baseX = this.game.config.width + index * spacing + 100;
            
            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³
            for (let j = 0; j < terrainPath.length - 1; j++) {
                if (terrainPath[j].x >= baseX && terrainPath[j].x < baseX + 100) {
                    const boxY = terrainPath[j].y - 30;
                    
                    const box = this.physics.add.sprite(terrainPath[j].x, boxY, 'questionBox');
                    box.setData('question', question);
                    box.setData('answered', false);
                    box.setData('isRepeat', false);
                    box.setScale(0.8);
                    
                    questionBoxes.push(box);
                    break;
                }
            }
        });
    }

    setupCollisions() {
        // Ø¥Ø¹Ø¯Ø§Ø¯ ØªØµØ§Ø¯Ù… Ø¨ÙŠÙ† Ø§Ù„Ø³ÙŠØ§Ø±Ø© ÙˆØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        this.physics.add.overlap(car, questionBoxes, (carObj, boxObj) => {
            if (!boxObj.getData('answered') && !gamePaused) {
                const question = boxObj.getData('question');
                currentQuestionBox = boxObj;
                showQuestion(question);
            }
        });
    }

    moveTerrain() {
        // ØªØ­Ø±ÙŠÙƒ Ù†Ù‚Ø§Ø· Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³
        for (let i = 0; i < terrainPath.length; i++) {
            terrainPath[i].x -= scrollSpeed * 0.8;
        }
        
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„ØªÙŠ Ø®Ø±Ø¬Øª ÙˆØ¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙŠØ¯Ø©
        while (terrainPath[0].x < -100) {
            terrainPath.shift();
        }
        
        while (terrainPath[terrainPath.length - 1].x < this.game.config.width * 3) {
            const lastPoint = terrainPath[terrainPath.length - 1];
            const newX = lastPoint.x + 20;
            let newY = lastPoint.y + (Math.random() - 0.5) * 8;
            
            newY = Math.max(this.game.config.height * 0.4, 
                          Math.min(this.game.config.height * 0.8, newY));
            
            terrainPath.push({ x: newX, y: newY });
        }
    }

    moveQuestionBoxes() {
        questionBoxes.forEach(box => {
            box.x -= scrollSpeed * 0.8;
            
            // Ø¥Ø¹Ø§Ø¯Ø© ÙˆØ¶Ø¹ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³
            const terrainY = this.getTerrainYAtX(box.x);
            if (terrainY !== null) {
                box.y = terrainY - 30;
            }
            
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„ØªÙŠ Ø®Ø±Ø¬Øª Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø©
            if (box.x < -50) {
                box.destroy();
            }
        });
        
        // ØªØµÙÙŠØ© Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ù…Ø¯Ù…Ø±Ø©
        questionBoxes = questionBoxes.filter(box => box.active);
    }

    updateCarPosition() {
        // ØªØ­Ø¯ÙŠØ« Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ù„ØªØ¨Ø¹ Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³
        const terrainY = this.getTerrainYAtX(car.x);
        if (terrainY !== null) {
            // Ø­Ø±ÙƒØ© Ù†Ø§Ø¹Ù…Ø© Ù„Ù„Ø³ÙŠØ§Ø±Ø©
            car.y = Phaser.Math.Linear(car.y, terrainY - 30, 0.1);
        }
        
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ÙŠÙ„ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¶ØºØ· Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        if (keys['ArrowLeft']) {
            car.angle = Math.max(car.angle - 2, -25);
        } else if (keys['ArrowRight']) {
            car.angle = Math.min(car.angle + 2, 25);
        } else {
            // Ø§Ù„Ø¹ÙˆØ¯Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¬ÙŠØ© Ù„Ù„ØªÙˆØ§Ø²Ù†
            if (car.angle > 0) car.angle = Math.max(0, car.angle - 1);
            else if (car.angle < 0) car.angle = Math.min(0, car.angle + 1);
        }
    }

    checkCollisions() {
        // ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØµØ·Ø¯Ø§Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨ÙˆØ§Ø³Ø·Ø© Phaser physics
    }

    updateGraphics() {
        // Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø³Ù… Ø§Ù„ØªØ¶Ø§Ø±ÙŠØ³
        this.drawTerrain();
    }

    getTerrainYAtX(x) {
        for (let i = 0; i < terrainPath.length - 1; i++) {
            if (terrainPath[i].x <= x && terrainPath[i + 1].x >= x) {
                const progress = (x - terrainPath[i].x) / (terrainPath[i + 1].x - terrainPath[i].x);
                return terrainPath[i].y + (terrainPath[i + 1].y - terrainPath[i].y) * progress;
            }
        }
        return null;
    }

    createRepeatQuestionBox(question) {
        // ÙˆØ¶Ø¹ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ù‡Ø¯ Ø§Ù„Ù…Ø±Ø¦ÙŠ
        const lastVisibleX = this.game.config.width + 200;
        const terrainY = this.getTerrainYAtX(lastVisibleX);
        
        if (terrainY !== null) {
            const repeatBox = this.physics.add.sprite(lastVisibleX, terrainY - 30, 'repeatBox');
            repeatBox.setData('question', question);
            repeatBox.setData('answered', false);
            repeatBox.setData('isRepeat', true);
            repeatBox.setScale(0.9);
            
            // ØªØ£Ø«ÙŠØ± Ø§Ù„ÙˆÙ‡Ø¬ Ù„Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù…ÙƒØ±Ø±
            repeatBox.setTint(0xFF5722);
            
            questionBoxes.push(repeatBox);
        }
    }
}

// ********** Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­ÙƒÙ… **********
function setupControls() {
    const leftBtn = document.getElementById('leftBtn');
    const rightBtn = document.getElementById('rightBtn');
    const accelerateBtn = document.getElementById('accelerateBtn');

    leftBtn.addEventListener('touchstart', (e) => {
        e.preventDefault();
        keys['ArrowLeft'] = true;
    });

    leftBtn.addEventListener('touchend', (e) => {
        e.preventDefault();
        keys['ArrowLeft'] = false;
    });

    rightBtn.addEventListener('touchstart', (e) => {
        e.preventDefault();
        keys['ArrowRight'] = true;
    });

    rightBtn.addEventListener('touchend', (e) => {
        e.preventDefault();
        keys['ArrowRight'] = false;
    });

    accelerateBtn.addEventListener('touchstart', (e) => {
        e.preventDefault();
        isAccelerating = true;
    });

    accelerateBtn.addEventListener('touchend', (e) => {
        e.preventDefault();
        isAccelerating = false;
    });

    // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
    window.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
            keys[e.key] = true;
        }
        if (e.key === ' ') {
            isAccelerating = true;
        }
    });

    window.addEventListener('keyup', (e) => {
        if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
            keys[e.key] = false;
        }
        if (e.key === ' ') {
            isAccelerating = false;
        }
    });
}

// ********** Ø¯ÙˆØ§Ù„ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… **********
function showQuestion(question) {
    gamePaused = true;
    
    const qb = document.getElementById("questionBox");
    document.getElementById("qText").textContent = question.q;
    
    const choicesDiv = document.getElementById("choices");
    choicesDiv.innerHTML = "";
    
    // Ø®Ù„Ø· Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
    const choices = [...question.c];
    const shuffled = [];
    while (choices.length) {
        const idx = Math.floor(Math.random() * choices.length);
        shuffled.push(choices.splice(idx, 1)[0]);
    }
    
    shuffled.forEach((choice, index) => {
        const originalIndex = question.c.indexOf(choice);
        const choiceDiv = document.createElement("div");
        choiceDiv.className = "choice";
        choiceDiv.textContent = choice;
        choiceDiv.onclick = () => handleAnswer(originalIndex, question, choiceDiv);
        choicesDiv.appendChild(choiceDiv);
    });
    
    qb.style.display = "block";
}

function handleAnswer(selectedIndex, question, choiceElement) {
    const isCorrect = selectedIndex === question.a;
    
    if (isCorrect) {
        // Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
        choiceElement.classList.add('correct');
        
        // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø³Ø±Ø¹Ø©
        baseSpeed = Math.min(4, baseSpeed + 0.3);
        
        // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø©
        score += 10;
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©
        answeredQuestions.add(question.q);
        addToAnsweredList(question);
        
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        const index = currentQuestions.findIndex(q => q.q === question.q);
        if (index > -1) {
            currentQuestions.splice(index, 1);
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚
        if (currentQuestionBox) {
            currentQuestionBox.setData('answered', true);
            currentQuestionBox.setTexture('questionBox');
            currentQuestionBox.setTint(0x4CAF50); // Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
        }
        
        setTimeout(() => {
            document.getElementById("questionBox").style.display = "none";
            gamePaused = false;
            currentQuestionBox = null;
            
            if (currentQuestions.length === 0) {
                endGame();
            }
            
            updateUI();
        }, 1000);
        
    } else {
        // Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø©
        choiceElement.classList.add('wrong');
        
        // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø³Ø±Ø¹Ø© Ø¨Ø´ÙƒÙ„ ÙƒØ¨ÙŠØ±
        baseSpeed = Math.max(1, baseSpeed * 0.6);
        
        // Ø¥Ù†Ø´Ø§Ø¡ ØµÙ†Ø¯ÙˆÙ‚ Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ù‡Ø¯
        if (scene) {
            scene.createRepeatQuestionBox(question);
        }
        
        setTimeout(() => {
            document.getElementById("questionBox").style.display = "none";
            gamePaused = false;
            currentQuestionBox = null;
            updateUI();
        }, 1500);
    }
}

function addToAnsweredList(question) {
    const answeredList = document.getElementById("answeredList");
    const div = document.createElement("div");
    div.className = "answered";
    div.textContent = question.q;
    answeredList.appendChild(div);
    answeredList.scrollTop = answeredList.scrollHeight;
}

function updateUI() {
    document.getElementById("currentSpeed").textContent = baseSpeed.toFixed(1);
    document.getElementById("score").textContent = score;
    document.getElementById("questionsRemaining").textContent = currentQuestions.length;
    
    // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³Ø±Ø¹Ø©
    const speedPercent = (baseSpeed / 4) * 100;
    document.getElementById("speedFill").style.width = `${speedPercent}%`;
}

function endGame() {
    gamePaused = true;
    document.getElementById("finalScore").textContent = score;
    document.getElementById("winScreen").classList.remove("hidden");
}

// ********** Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© **********
function startGame() {
    document.getElementById("startScreen").classList.add("hidden");
    document.getElementById("gameContainer").classList.remove("hidden");
    
    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù„Ø¹Ø¨Ø©
    baseSpeed = 2;
    scrollSpeed = baseSpeed;
    score = 0;
    currentQuestions = [...allQuestions];
    answeredQuestions.clear();
    gamePaused = false;
    isAccelerating = false;
    keys = {};
    
    document.getElementById("answeredList").innerHTML = "";
    document.getElementById("winScreen").classList.add("hidden");
    
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ…
    setupControls();
    
    // ØªÙ‡ÙŠØ¦Ø© Phaser Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
    if (!game) {
        config = {
            type: Phaser.AUTO,
            parent: 'gameArea',
            width: window.innerWidth,
            height: window.innerHeight - 50, // Ù†Ø§Ù‚Øµ Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„ header
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: { y: 0 },
                    debug: false
                }
            },
            scene: MainScene
        };
        
        game = new Phaser.Game(config);
        scene = game.scene.keys.MainScene;
    } else {
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø´Ù‡Ø¯
        scene.scene.restart();
    }
    
    updateUI();
}

function restartGame() {
    document.getElementById("winScreen").classList.add("hidden");
    startGame();
}

// ********** ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© **********
window.addEventListener('load', () => {
    // Ù„Ø§ Ù†Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ØŒ Ù†Ù†ØªØ¸Ø± Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
});

// ********** ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ù†Ø§ÙØ°Ø© **********
window.addEventListener('resize', () => {
    if (game) {
        game.scale.resize(window.innerWidth, window.innerHeight - 50);
    }
});
</script>
</body>
</html>
